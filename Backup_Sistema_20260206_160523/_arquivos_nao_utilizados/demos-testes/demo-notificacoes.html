<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîî Demo - Sistema Avan√ßado de Notifica√ß√µes</title>
    
    <!-- Toast Notifications -->
    <link rel="stylesheet" href="toast-notifications.css?v=20260116">
    <script src="toast-notifications.js?v=20260116"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: white;
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
            background: linear-gradient(135deg, #ff6600, #ff8533);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }
        
        .card h2 {
            font-size: 1.5rem;
            margin-bottom: 16px;
            color: #ff6600;
        }
        
        .btn {
            width: 100%;
            padding: 12px 20px;
            margin: 8px 0;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .btn-error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        .btn-info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .stats {
            background: rgba(255, 102, 0, 0.1);
            border: 1px solid rgba(255, 102, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 40px;
        }
        
        .stats h3 {
            margin-bottom: 16px;
            color: #ff6600;
        }
        
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
        }
        
        .stat-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #ff6600;
            display: block;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: #999;
            margin-top: 4px;
        }
        
        .toggle-group {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }
        
        .badge {
            display: inline-block;
            background: #ef4444;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
            margin-left: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîî Sistema Avan√ßado de Notifica√ß√µes</h1>
        
        <div class="grid">
            <!-- Toasts B√°sicos -->
            <div class="card">
                <h2>üì¢ Toasts B√°sicos</h2>
                <button class="btn btn-success" onclick="Toast.success('Opera√ß√£o conclu√≠da com sucesso! üéâ')">
                    ‚úÖ Success
                </button>
                <button class="btn btn-error" onclick="Toast.error('Erro ao processar a solicita√ß√£o!')">
                    ‚ùå Error
                </button>
                <button class="btn btn-warning" onclick="Toast.warning('Aten√ß√£o! Verifique os dados antes de continuar.')">
                    ‚ö†Ô∏è Warning
                </button>
                <button class="btn btn-info" onclick="Toast.info('Nova atualiza√ß√£o dispon√≠vel!')">
                    ‚ÑπÔ∏è Info
                </button>
            </div>
            
            <!-- Configura√ß√µes -->
            <div class="card">
                <h2>‚öôÔ∏è Configura√ß√µes</h2>
                <button class="btn btn-secondary" onclick="toggleSound()">
                    <span id="sound-icon">üîä</span> <span id="sound-text">Desativar Sons</span>
                </button>
                <button class="btn btn-secondary" onclick="toggleVibration()">
                    <span id="vibration-icon">üì±</span> <span id="vibration-text">Desativar Vibra√ß√£o</span>
                </button>
                <button class="btn btn-secondary" onclick="Toast.toggleHistory()">
                    üìã Ver Hist√≥rico <span class="badge" id="history-count">0</span>
                </button>
                <button class="btn btn-secondary" onclick="requestNotifications()">
                    üîî Permitir Notifica√ß√µes
                </button>
            </div>
            
            <!-- Temas -->
            <div class="card">
                <h2>üé® Temas</h2>
                <button class="btn btn-warning" onclick="Toast.setTheme('admin'); showThemeChange('Admin')">
                    üü† Tema Admin (Laranja)
                </button>
                <button class="btn btn-info" onclick="Toast.setTheme('client'); showThemeChange('Cliente')">
                    üîµ Tema Cliente (Azul)
                </button>
                <button class="btn btn-secondary" onclick="Toast.setTheme('auto'); showThemeChange('Auto')">
                    üîÑ Tema Autom√°tico
                </button>
            </div>
            
            <!-- Notifica√ß√µes em Batch -->
            <div class="card">
                <h2>‚ö° Batch (Agrupamento)</h2>
                <button class="btn btn-success" onclick="testBatch()">
                    üì¶ Simular 5 Notifica√ß√µes
                </button>
                <button class="btn btn-info" onclick="testMixedBatch()">
                    üé≤ Batch Misto (Success + Error)
                </button>
                <button class="btn btn-secondary" onclick="Toast.processBatch()">
                    ‚öôÔ∏è Processar Fila Manualmente
                </button>
            </div>
            
            <!-- Retry System -->
            <div class="card">
                <h2>üîÑ Sistema de Retry</h2>
                <button class="btn btn-success" onclick="testRetrySuccess()">
                    ‚úÖ API com Retry (Sucesso)
                </button>
                <button class="btn btn-error" onclick="testRetryFail()">
                    ‚ùå API com Retry (Falha)
                </button>
                <button class="btn btn-warning" onclick="testRetryRandom()">
                    üé≤ API Aleat√≥ria
                </button>
            </div>
            
            <!-- Funcionalidades Avan√ßadas -->
            <div class="card">
                <h2>üöÄ Avan√ßado</h2>
                <button class="btn btn-info" onclick="testBrowserNotification()">
                    üîî Notifica√ß√£o do Navegador
                </button>
                <button class="btn btn-warning" onclick="testConfirm()">
                    ‚ùì Di√°logo de Confirma√ß√£o
                </button>
                <button class="btn btn-error" onclick="testConfirmDelete()">
                    üóëÔ∏è Confirmar Exclus√£o
                </button>
                <button class="btn btn-secondary" onclick="testLongMessage()">
                    üìù Mensagem Longa
                </button>
            </div>
        </div>
        
        <!-- Analytics -->
        <div class="stats">
            <h3>üìä Analytics em Tempo Real</h3>
            <div class="stat-grid">
                <div class="stat-item">
                    <span class="stat-value" id="stat-total">0</span>
                    <div class="stat-label">Total</div>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="stat-success">0</span>
                    <div class="stat-label">‚úÖ Success</div>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="stat-error">0</span>
                    <div class="stat-label">‚ùå Errors</div>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="stat-warning">0</span>
                    <div class="stat-label">‚ö†Ô∏è Warnings</div>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="stat-info">0</span>
                    <div class="stat-label">‚ÑπÔ∏è Info</div>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="stat-clicks">0</span>
                    <div class="stat-label">üëÜ Clicks</div>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="stat-dismisses">0</span>
                    <div class="stat-label">‚ùå Dismisses</div>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="stat-clickrate">0%</span>
                    <div class="stat-label">Click Rate</div>
                </div>
            </div>
            <div class="toggle-group">
                <button class="btn btn-secondary" onclick="updateStats()" style="flex: 1;">
                    üîÑ Atualizar
                </button>
                <button class="btn btn-error" onclick="resetStats()" style="flex: 1;">
                    üóëÔ∏è Resetar Analytics
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            updateUI();
            updateStats();
            
            // Atualizar stats a cada 2 segundos
            setInterval(updateStats, 2000);
            
            // Atualizar contador de hist√≥rico
            setInterval(() => {
                const badge = document.getElementById('history-count');
                if (badge) {
                    badge.textContent = Toast.unreadCount;
                }
            }, 1000);
            
            // Mensagem de boas-vindas
            setTimeout(() => {
                Toast.info('üéâ Bem-vindo ao Sistema Avan√ßado de Notifica√ß√µes!\n\nTeste todas as funcionalidades!', 5000);
            }, 500);
        });
        
        // Toggle Sons
        function toggleSound() {
            Toast.toggleSound();
            updateUI();
        }
        
        // Toggle Vibra√ß√£o
        function toggleVibration() {
            Toast.toggleVibration();
            updateUI();
        }
        
        // Atualizar UI
        function updateUI() {
            document.getElementById('sound-icon').textContent = Toast.soundEnabled ? 'üîä' : 'üîá';
            document.getElementById('sound-text').textContent = Toast.soundEnabled ? 'Desativar Sons' : 'Ativar Sons';
            
            document.getElementById('vibration-icon').textContent = Toast.vibrationEnabled ? 'üì±' : 'üì¥';
            document.getElementById('vibration-text').textContent = Toast.vibrationEnabled ? 'Desativar Vibra√ß√£o' : 'Ativar Vibra√ß√£o';
        }
        
        // Teste de Batch
        function testBatch() {
            for (let i = 1; i <= 5; i++) {
                Toast.batchNotification('success', `Item ${i} processado com sucesso!`, 4000);
            }
        }
        
        // Teste de Batch Misto
        function testMixedBatch() {
            Toast.batchNotification('success', 'Opera√ß√£o 1 conclu√≠da', 4000);
            Toast.batchNotification('success', 'Opera√ß√£o 2 conclu√≠da', 4000);
            Toast.batchNotification('error', 'Opera√ß√£o 3 falhou', 4000);
            Toast.batchNotification('error', 'Opera√ß√£o 4 falhou', 4000);
            Toast.batchNotification('warning', 'Opera√ß√£o 5 com avisos', 4000);
        }
        
        // Teste de Retry - Sucesso
        async function testRetrySuccess() {
            Toast.info('Iniciando requisi√ß√£o...', 2000);
            
            try {
                const result = await Toast.retryRequest(async () => {
                    // Simular API que funciona
                    await new Promise(resolve => setTimeout(resolve, 500));
                    return { status: 'ok', data: 'Dados carregados!' };
                });
                
                Toast.success('‚úÖ Requisi√ß√£o bem-sucedida!\n\nDados: ' + result.data);
            } catch (error) {
                Toast.error('Erro inesperado: ' + error.message);
            }
        }
        
        // Teste de Retry - Falha
        async function testRetryFail() {
            Toast.info('Iniciando requisi√ß√£o...', 2000);
            
            try {
                await Toast.retryRequest(async () => {
                    // Simular API que sempre falha
                    await new Promise(resolve => setTimeout(resolve, 500));
                    throw new Error('API indispon√≠vel');
                }, {
                    maxRetries: 2,
                    delay: 800
                });
            } catch (error) {
                // Toast.error j√° √© mostrado automaticamente
                console.log('Falha confirmada ap√≥s retries');
            }
        }
        
        // Teste de Retry - Aleat√≥rio
        async function testRetryRandom() {
            Toast.info('Iniciando requisi√ß√£o aleat√≥ria...', 2000);
            
            let attempt = 0;
            try {
                const result = await Toast.retryRequest(async () => {
                    attempt++;
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                    // 50% de chance de sucesso
                    if (Math.random() > 0.5) {
                        return { status: 'ok', attempt };
                    } else {
                        throw new Error('Falha aleat√≥ria');
                    }
                }, {
                    maxRetries: 3
                });
                
                Toast.success(`‚úÖ Sucesso na tentativa ${result.attempt}!`);
            } catch (error) {
                console.log('Falhou ap√≥s todas as tentativas');
            }
        }
        
        // Teste de Notifica√ß√£o do Navegador
        async function testBrowserNotification() {
            if (Toast.notificationPermission !== 'granted') {
                const permission = await Toast.requestNotificationPermission();
                if (permission !== 'granted') {
                    Toast.warning('Permiss√£o negada! As notifica√ß√µes n√£o funcionar√£o.');
                    return;
                }
            }
            
            Toast.browserNotification(
                'üèçÔ∏è MacDavis Motos',
                'Esta √© uma notifica√ß√£o de teste do navegador!'
            );
            
            Toast.success('Notifica√ß√£o enviada! Verifique o canto da tela.');
        }
        
        // Solicitar Permiss√£o
        async function requestNotifications() {
            const permission = await Toast.requestNotificationPermission();
            if (permission === 'granted') {
                Toast.success('‚úÖ Notifica√ß√µes permitidas!');
            } else {
                Toast.warning('‚ö†Ô∏è Notifica√ß√µes bloqueadas.');
            }
        }
        
        // Teste de Confirma√ß√£o
        async function testConfirm() {
            const confirmed = await Toast.confirm(
                'Deseja continuar com esta a√ß√£o?\n\nEsta √© uma demonstra√ß√£o do sistema de confirma√ß√£o.',
                {
                    title: 'Confirmar A√ß√£o',
                    confirmText: 'Sim, continuar',
                    cancelText: 'Cancelar',
                    icon: '‚ùì'
                }
            );
            
            if (confirmed) {
                Toast.success('‚úÖ A√ß√£o confirmada!');
            } else {
                Toast.info('‚ÑπÔ∏è A√ß√£o cancelada.');
            }
        }
        
        // Teste de Confirma√ß√£o de Exclus√£o
        async function testConfirmDelete() {
            const confirmed = await Toast.confirmDelete('Honda CG 160 Fan');
            
            if (confirmed) {
                Toast.success('üóëÔ∏è Item exclu√≠do com sucesso!');
            } else {
                Toast.info('‚ÑπÔ∏è Exclus√£o cancelada.');
            }
        }
        
        // Teste de Mensagem Longa
        function testLongMessage() {
            Toast.info(`
                üìã INFORMA√á√ïES DETALHADAS
                
                Esta √© uma notifica√ß√£o com m√∫ltiplas linhas de texto
                para demonstrar como o sistema lida com mensagens longas.
                
                ‚úÖ Suporta quebras de linha
                ‚úÖ Formata√ß√£o de texto
                ‚úÖ Emojis e s√≠mbolos especiais
                ‚úÖ Scroll autom√°tico se necess√°rio
                
                Clique no X para fechar!
            `, 15000);
        }
        
        // Mudar Tema
        function showThemeChange(themeName) {
            Toast.success(`üé® Tema alterado para: ${themeName}`, 3000);
        }
        
        // Atualizar Stats
        function updateStats() {
            const stats = Toast.getAnalytics();
            
            document.getElementById('stat-total').textContent = stats.total;
            document.getElementById('stat-success').textContent = stats.byType.success;
            document.getElementById('stat-error').textContent = stats.byType.error;
            document.getElementById('stat-warning').textContent = stats.byType.warning;
            document.getElementById('stat-info').textContent = stats.byType.info;
            document.getElementById('stat-clicks').textContent = stats.clicks;
            document.getElementById('stat-dismisses').textContent = stats.dismisses;
            document.getElementById('stat-clickrate').textContent = stats.clickRate + '%';
        }
        
        // Resetar Stats
        function resetStats() {
            if (confirm('Resetar todas as estat√≠sticas?')) {
                Toast.resetAnalytics();
                updateStats();
            }
        }
    </script>
</body>
</html>
