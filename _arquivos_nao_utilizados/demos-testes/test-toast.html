<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Toast - MacDavis</title>
    <link rel="stylesheet" href="toast-notifications.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 8px;
            font-weight: 600;
        }
        button:hover {
            background: #1976d2;
        }
        .info {
            background: #e3f2fd;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
            border-left: 4px solid #2196f3;
        }
        h1 {
            color: #333;
            margin-bottom: 24px;
        }
        .status {
            margin: 16px 0;
            padding: 12px;
            background: #f5f5f5;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Teste de Sistema de Notifica√ß√µes</h1>
        
        <div class="info">
            <strong>üéØ Instru√ß√µes:</strong><br>
            1. Clique nos bot√µes abaixo para testar cada tipo de Toast<br>
            2. Clique em "Pedir Permiss√£o" para ativar notifica√ß√µes do navegador<br>
            3. Clique em "Toast + Notifica√ß√£o" para testar ambos juntos
        </div>

        <div class="status" id="status">
            Carregando...
        </div>

        <h3>üì± Toasts Visuais</h3>
        <button onclick="testSuccess()">‚úÖ Toast Success</button>
        <button onclick="testError()">‚ùå Toast Error</button>
        <button onclick="testWarning()">‚ö†Ô∏è Toast Warning</button>
        <button onclick="testInfo()">‚ÑπÔ∏è Toast Info</button>

        <h3>üîî Notifica√ß√µes do Navegador</h3>
        <button onclick="requestPermission()">üîë Pedir Permiss√£o</button>
        <button onclick="testBrowserNotification()">üîî Notifica√ß√£o do Navegador</button>
        <button onclick="testBoth()">üéâ Toast + Notifica√ß√£o</button>

        <h3>üèçÔ∏è Simula√ß√£o de Agendamento</h3>
        <button onclick="simulateAppointment()">üìÖ Novo Agendamento (Simula√ß√£o)</button>
    </div>

    <script src="toast-notifications.js"></script>
    <script>
        // Atualizar status
        function updateStatus() {
            const status = document.getElementById('status');
            const permission = Notification?.permission || 'n√£o suportado';
            
            status.innerHTML = `
                <strong>Status do Sistema:</strong><br>
                Toast carregado: ${window.Toast ? '‚úÖ SIM' : '‚ùå N√ÉO'}<br>
                Toast.container: ${window.Toast?.container ? '‚úÖ EXISTE' : '‚ùå N√ÉO EXISTE'}<br>
                Suporte a Notification: ${typeof Notification !== 'undefined' ? '‚úÖ SIM' : '‚ùå N√ÉO'}<br>
                Permiss√£o atual: <strong>${permission}</strong><br>
                showNotificationBanner: ${typeof Toast?.showNotificationBanner === 'function' ? '‚úÖ EXISTE' : '‚ùå N√ÉO EXISTE'}
            `;
        }

        // Testar Toasts
        function testSuccess() {
            Toast.success('Este √© um Toast de SUCESSO! ‚úÖ', 5000);
        }

        function testError() {
            Toast.error('Este √© um Toast de ERRO! ‚ùå', 5000);
        }

        function testWarning() {
            Toast.warning('Este √© um Toast de AVISO! ‚ö†Ô∏è', 5000);
        }

        function testInfo() {
            Toast.info('Este √© um Toast de INFORMA√á√ÉO!\nCom m√∫ltiplas linhas! üìò', 5000);
        }

        // Pedir permiss√£o
        async function requestPermission() {
            console.log('üîî Bot√£o Pedir Permiss√£o clicado');
            console.log('Permiss√£o atual:', Toast.notificationPermission);
            
            if (Toast.showNotificationBanner) {
                Toast.showNotificationBanner();
                // Atualizar status ap√≥s 1 segundo (tempo para processar a resposta)
                setTimeout(updateStatus, 1000);
            } else if (Toast.requestNotificationPermission) {
                const permission = await Toast.requestNotificationPermission();
                Toast.info(`Permiss√£o: ${permission}`, 3000);
                updateStatus();
            }
        }

        // Testar notifica√ß√£o do navegador
        function testBrowserNotification() {
            if (Toast.browserNotification) {
                Toast.browserNotification(
                    'üèçÔ∏è MacDavis Motos',
                    'Esta √© uma notifica√ß√£o do navegador! Funciona mesmo em outras abas.'
                );
            } else {
                alert('browserNotification n√£o dispon√≠vel');
            }
        }

        // Testar ambos
        function testBoth() {
            if (Toast.infoWithBrowserNotification) {
                Toast.infoWithBrowserNotification(
                    'Cliente: Jo√£o Silva\nMoto: Honda CG 160\nüìÖ 16/01/2026 √†s 14:00',
                    'üèçÔ∏è Novo Agendamento - MacDavis Motos',
                    8000
                );
            } else {
                alert('infoWithBrowserNotification n√£o dispon√≠vel');
            }
        }

        // Simular agendamento
        function simulateAppointment() {
            const clientes = ['Jo√£o Silva', 'Maria Santos', 'Pedro Costa'];
            const motos = ['Honda CG 160', 'Yamaha Factor 150', 'Kawasaki Ninja 400'];
            
            const cliente = clientes[Math.floor(Math.random() * clientes.length)];
            const moto = motos[Math.floor(Math.random() * motos.length)];
            const data = '16/01/2026';
            const horario = '14:00';

            console.log('üìã Simulando novo agendamento:', { cliente, moto, data, horario });

            if (Toast.infoWithBrowserNotification) {
                Toast.infoWithBrowserNotification(
                    `${cliente}\n${moto}\nüìÖ ${data} √†s ${horario}`,
                    'üèçÔ∏è Novo Agendamento - MacDavis Motos',
                    8000
                );
            }
        }

        // Atualizar status ao carregar
        setTimeout(updateStatus, 500);
    </script>
</body>
</html>
